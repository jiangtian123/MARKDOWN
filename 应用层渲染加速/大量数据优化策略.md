# 中大场景优化的一些方法

中型或者大型场景中，有着大量的物体来丰富画面的表现效果。如一个城市场景中，将会有大量的建筑，植被。这些海量的物体如果不进行合批，剔除操作，将会带来很大性能开销，这些开销主要集中在。
1. CPU向GPU通信的开销

  - 海量的顶点数据会带来很大带宽压力
  - 材质过多导致**SetPassCall**增多。CPU在提交渲染命令时，并不是一个一个命令提交的，而是存储在一个Command Buffer中，在适当的时候一起发给GPU，而渲染状态的切换，就导致切换前的GPU命令必须被执行，所以每次切换渲染状态都会导致当前的CommandBuffer里缓存的命令被提交。Cpu由用户态转换为内核态，这一步时很耗时的。
  - 大量的DC也会导致命令队列的堵塞，导致CPU端性能开销剧增
2. GPU的开销
  - 顶点数量过多，尤其是移动的设备，基于TBDR架构的GPU再处理完顶点时会生成一个顶点List，等当前缓冲被替换时，才会开启光栅化及后续命令，这些被处理的顶点都放在缓冲中，如果顶点熟练过多会导致缓冲放不下，而放到DRAM上，增加访问周期。
  - VS,PS等管线计算量增加
  - 材质过多的情况下贴图，申请的缓冲占用的显存增加，同时访问贴图等数据增加带宽和功耗。

## 常见的一些优化手段

### 一，LOD

### 二，合批

1. 静态合批
   - 

### 三，场景的层次管理

### 四，各种剔除技术